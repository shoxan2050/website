<!DOCTYPE html>
<html lang="uz">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>

    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

    <style>
        body {
            margin: 0;
            font-family: system-ui;
            background: linear-gradient(135deg, #0f172a, #1e1b4b);
            color: #e5e7eb;
            display: flex;
            justify-content: center;
        }

        .container {
            background: #1f2937;
            padding: 40px;
            margin-top: 40px;
            border-radius: 20px;
            width: 100%;
            max-width: 700px;
        }

        input,
        button {
            width: 100%;
            padding: 14px;
            margin-top: 12px;
            border-radius: 12px;
            border: none;
            font-size: 16px;
        }

        input {
            background: #020617;
            color: white;
            border: 2px solid #334155;
        }

        button {
            background: linear-gradient(135deg, #38bdf8, #0ea5e9);
            font-weight: 700;
            cursor: pointer;
        }

        .hidden {
            display: none
        }

        .error {
            color: #f87171;
            margin-top: 10px
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Admin Panel</h1>

        <!-- LOGIN -->
        <div id="loginBox">
            <input type="password" id="adminPass" placeholder="Admin parol">
            <button id="loginBtn">Kirish</button>
            <div class="error" id="error"></div>
        </div>

        <!-- ADMIN PANEL -->
        <div id="adminPanel" class="hidden">
            <h2>Xush kelibsiz, Admin</h2>
            <button onclick="alert('Kod qo‘shish shu yerda bo‘ladi')">Kod qo‘shish</button>
            <button onclick="alert('Kodlar ro‘yxati')">Kodlarim</button>
            <button onclick="alert('Botga yuborildi')">Botga yuborish</button>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAYbHeM6nDZgIdYBbxtxQvx4S0npE8lRwk",
            authDomain: "requered.firebaseapp.com",
            databaseURL: "https://requered-default-rtdb.firebaseio.com",
            projectId: "requered"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const loginBtn = document.getElementById("loginBtn");
        const adminPass = document.getElementById("adminPass");
        const error = document.getElementById("error");
        const loginBox = document.getElementById("loginBox");
        const adminPanel = document.getElementById("adminPanel");

        loginBtn.onclick = async () => {
            error.textContent = "";
            const input = adminPass.value.trim();
            if (!input) return;

            const snap = await db.ref("users/adm").once("value");

            if (!snap.exists()) {
                error.textContent = "Adminlar topilmadi";
                return;
            }

            const admins = Object.values(snap.val());

            // ❌ OWNER BLOK
            if (input.toLowerCase() === "own") {
                error.textContent = "Ruxsat yo‘q";
                return;
            }

            if (admins.includes(input)) {
                loginBox.classList.add("hidden");
                adminPanel.classList.remove("hidden");
            } else {
                error.textContent = "Xato parol";
            }
        };
    </script>
</body>

</html>
