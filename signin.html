<script type="module">
  console.log("Signin script yuklandi");

  import { auth } from "./firebase.js";
  import {
    signInWithEmailAndPassword,
    onAuthStateChanged
  } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";

  const errorBox = document.getElementById("error");

  onAuthStateChanged(auth, user => {
    if (user) {
      console.log("Oldin login boâ€˜lgan:", user.uid);
      location.href = "/major.html";
    }
  });

  document.getElementById("loginBtn").onclick = async () => {
    errorBox.textContent = "";
    try {
      console.log("Login bosildi");

      const email = emailInput.value.trim();
      const password = passwordInput.value;

      const cred = await signInWithEmailAndPassword(auth, email, password);
      console.log("Login OK:", cred.user.uid);

      location.href = "/major.html";
    } catch (e) {
      console.error(e);
      errorBox.textContent = e.message;
    }
  };
</script>
