<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<title>Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script type="module" src="firebase.js"></script>

<style>
body{
  margin:0;
  font-family:system-ui;
  background:#020617;
  color:#e5e7eb;
}
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:20px 40px;
  background:#020617;
  border-bottom:1px solid #334155;
}
.user{
  font-size:18px;
  font-weight:600;
}
.container{
  max-width:900px;
  margin:60px auto;
  text-align:center;
}
h1{font-size:36px}
.role-btns{
  display:flex;
  justify-content:center;
  gap:30px;
  margin-top:40px;
}
button{
  padding:24px 40px;
  font-size:22px;
  border-radius:18px;
  border:none;
  cursor:pointer;
  font-weight:700;
}
.teacher{background:#38bdf8;color:#020617}
.student{background:#22c55e;color:#020617}
.stats{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:30px;
  margin-top:60px;
}
.card{
  background:#020617;
  border:1px solid #334155;
  border-radius:18px;
  padding:20px;
}
</style>
</head>

<body>

<header>
  <div class="logo">EduCode</div>
  <div class="user" id="userName">Foydalanuvchi</div>
</header>

<div class="container">
  <h1>Siz o‘qituvchimisiz?</h1>

  <div class="role-btns">
    <button class="teacher" onclick="goTeacher()">Ha, o‘qituvchiman</button>
    <button class="student" onclick="goStudent()">Yo‘q, o‘quvchiman</button>
  </div>

  <div class="stats">
    <div class="card">
      <h3>To‘g‘ri javoblar</h3>
      <canvas id="c1"></canvas>
    </div>
    <div class="card">
      <h3>Xato javoblar</h3>
      <canvas id="c2"></canvas>
    </div>
  </div>
</div>

<script type="module">
import { auth, onAuthStateChanged } from "./firebase.js";

onAuthStateChanged(auth,user=>{
  if(!user){
    location.href="/signin.html";
  }else{
    document.getElementById("userName").textContent =
      user.displayName || "Foydalanuvchi";
  }
});

// chartlar hozircha 0%
const zeroChart = (id,label)=>new Chart(
 document.getElementById(id),
 {
  type:'doughnut',
  data:{labels:[label],datasets:[{data:[0],backgroundColor:["#38bdf8"]}]},
  options:{plugins:{legend:{display:false}}}
 }
);
zeroChart("c1","0%");
zeroChart("c2","0%");

window.goTeacher=()=>location.href="/teacher.html";
window.goStudent=()=>location.href="/student.html";
</script>

</body>
</html>
